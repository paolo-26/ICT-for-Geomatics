close all;
clear;
clc;
format long;

X_A = 4472675.1340  %/ 1e6;
Y_A = 677732.7296   %/ 1e6;
Z_A = 4481406.6192  %/ 1e6;

X_B = 4472674.8193  %/ 1e6;
Y_B = 677733.0708   %/ 1e6;
Z_B = 4481406.8974  %/ 1e6;



%Mondovì
% X_A = 4523227.3918  / 1e6;
% Y_A = 621792.1742   / 1e6;
% Z_A = 4439482.9654  / 1e6;
% 
% X_B = 4523227.0920  / 1e6;
% Y_B = 621792.5562   / 1e6;
% Z_B = 4439483.2501  / 1e6;

%TORINO
% X_A = 4472544.5785  / 1e6;
% Y_A = 601634.0764   / 1e6;
% Z_A = 4492545.0107  / 1e6;
% 
% X_B = 4472544.2920  / 1e6;
% Y_B = 601634.4325   / 1e6;
% Z_B = 4492545.2622  / 1e6;

A = [1 0 0  X_A   0    -Z_A    Y_A;
     0 1 0  Y_A  -Z_A   0     -X_A;  
     0 0 1  Z_A   Y_A   X_A    0  ]
 
 I0 = [X_B-X_A; Y_B-Y_A; Z_B-Z_A]
 
x = (inv(A'*A)) * (A'*I0)

 v = A*x-I0